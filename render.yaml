# Render Blueprint — для деплоя API из monorepo
# Используй этот файл при создании сервиса через Blueprint или скопируй настройки в Dashboard
services:
  - type: web
    name: buildcrm-api
    runtime: docker
    dockerfilePath: ./apps/api/Dockerfile
    dockerContext: ./apps/api
    envVars:
      - key: NODE_VERSION
        value: "22"
    # DATABASE_URL и JWT_SECRET задай в Environment Variables в Dashboard
    # Persistent Disk: чтобы uploads (фото, голосовые) не пропадали после перезапуска.
    # Без диска ссылки /uploads/xxx дают 404. Подробнее: docs/RENDER-UPLOADS-404.md
    disk:
      name: uploads
      mountPath: /app/uploads
      sizeGB: 1

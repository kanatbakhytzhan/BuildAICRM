# Что такое «применить миграцию» — простыми словами

## Простое объяснение

**Миграция** — это обновление структуры базы данных. Как обновление приложения на телефоне: добавляются новые «части», чтобы всё работало.

Когда мы добавили смены и распределение лидов, в базе данных нужно создать:
- новую таблицу (кто сегодня на работе),
- новые поля в настройках (время смены и т.п.).

Команда **применяет миграцию** — то есть выполняет эти изменения в базе один раз.

---

## Команда

```
cd apps/api && npx prisma migrate deploy
```

**Что она делает:**
1. Переходит в папку `apps/api`
2. Запускает Prisma (инструмент для работы с базой)
3. Применяет все «ожидающие» миграции — создаёт таблицы и поля

---

## Когда это нужно?

- **Первый деплой** или **после обновления кода** с новыми функциями (смены, распределение лидов и т.д.)
- Обычно **один раз** после выката новой версии

---

## Если вы используете Render

На Render миграцию часто запускают **автоматически** при деплое. В настройках сервиса можно добавить команду в **Build Command** или **Release Command**, например:

```
npx prisma migrate deploy
```

Тогда при каждом деплое миграции применятся сами.

---

## Если миграцию нужно запустить вручную

1. Откройте терминал (командную строку) на компьютере или на сервере
2. Перейдите в папку проекта: `cd путь-к-проекту`
3. Выполните: `cd apps/api && npx prisma migrate deploy`

После этого база будет обновлена и новые функции (смены, распределение) заработают.
